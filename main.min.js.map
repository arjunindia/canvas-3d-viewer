{"version":3,"sourceRoot":"https://arjunindia.github.io/canvas-3d-viewer/","sources":["main.js"],"names":["parseSTL","ctx","display","getContext","canvas","width","height","imageSmoothingQuality","imageSmoothingEnabled","textRendering","drawFocusIfNeeded","let","pageZoom","window","devicePixelRatio","clipZ","project3dPoint","x","y","z","clippedZ","Math","max","cartesianToJSCoordinate","printPoint","fillRect","rotate_axis","point","axis","angle","rotatedX","cos","sin","rotatedZ","rotatedY","transposeZ","delta","transposeY","transposeX","isFrontFacing","polygon","transformedPoints","v0","v1","v2","edge1","edge2","normal","viewVector","dotProduct","stlData","await","fetch","then","res","arrayBuffer","points","connections","polygons","isManifold","dimensions","center","maxDimension","depth","radius","verticalFOV_deg","halfFOV_rad","PI","zDistance","tan","paddingFactor","console","log","zoomFactor","centerOffset","applyCenterOffset","forEach","index","rotatedPoint","rotatedNormal","transformedNormal","lastTime","performance","now","frameCount","fps","draw","clearRect","renderablePolygons","map","originalPoints","avgZ","reduce","acc","p","length","projected2DPoints","cartesian2DPoints","gradientForPolygon","createLinearGradient","j","stop","round","addColorStop","originalPolygon","sort","a","b","i","projectedPointsCurr","fillStyle","beginPath","moveTo","lineTo","fill","currentTime","elapsedTime","font","fillText","setTimeout"],"mappings":"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"}